Installation Data verse over ubuntu 18.04 

https://www.itzgeek.com/how-tos/linux/ubuntu-how-tos/how-to-install-oracle-java-jdk-10-8-on-ubuntu-18-04-ubuntu-17-10.html
https://www.nabenik.com/blog/2019/2019-05-02-Payara-Nginx-LetsEncrypt.html
https://sysadmins.co.za/setup-payara-java-application-server-on-ubuntu-16-04/

https://vorozco.com/blog/2017/2017-08-25-Payara41-Quick-Install-CentoOS-7.html

Required Components
When planning your installation you should be aware of the following components of the Dataverse architecture:

Linux: RHEL/CentOS is highly recommended since all development and QA happens on this distribution.
App server: Payara is the recommended Jakarta EE application server
PostgreSQL: a relational database.
Solr: a search engine. A Dataverse-specific schema is provided.
SMTP server: for sending mail for password resets and other notifications.
Persistent identifier service: DOI and Handle support are provided. Production use requires a registered DOI or Handle.net authority.


We recommend using Oracle JDK or OpenJDK.



2.Payara

  Modern App Developmen


  sudo useradd dataverse 


swebshet@swebshet:~/Documents/Dataverse$ sudo tar -zxvf jdk-8u261-linux-x64.tar.gz -C /usr/lib/jvm/



swebshet@swebshet:~$ sudo update-alternatives --install /usr/bin/java java /usr/lib/jvm/jdk1.8.0_261/bin/java 2

sudo mkdir /usr/lib/jvm/



sudo update-alternatives --config java
There are 2 choices for the alternative java (providing /usr/bin/java).

  Selection    Path                                            Priority   Status
------------------------------------------------------------
* 0            /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java   1081      auto mode
  1            /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java   1081      manual mode
  2            /usr/lib/jvm/jdk1.8.0_261/bin/java               2         manual mode

Press <enter> to keep the current choice[*], or type selection number: 2
update-alternatives: using /usr/lib/jvm/jdk1.8.0_261/bin/java to provide /usr/bin/java (java) in manual mode



java -version
java version "1.8.0_261"
Java(TM) SE Runtime Environment (build 1.8.0_261-b12)
Java HotSpot(TM) 64-Bit Server VM (build 25.261-b12, mixed mode)








Test Payara Startup Time on ubuntu 

swebshet@swebshet:~$ sudo adduser payara
Adding user `payara' ...
Adding new group `payara' (1007) ...
Adding new user `payara' (1007) with gr


Paya@2020


swebshet@swebshet:/usr/local$ sudo chown -R payara:payara payara5




SystemD Unit File:
Create the SystemD Unit File to be able to manage the state of the Payara Server via SystemD:



swebshet@swebshet:/etc/systemd/system$ sudo nano payara.service



Reload the systemd daemon:            swebshet@swebshet:~$ systemctl daemon-reload


swebshet@swebshet:~$ systemctl daemon-reload
swebshet@swebshet:~$ systemctl enable payara
Created symlink /etc/systemd/system/multi-user.target.wants/payara.service → /etc/systemd/system/payara.service.
swebshet@swebshet:~$ systemctl enable payara




root@swebshet:/home/swebshet# cd
root@swebshet:~# echo 'export PATH=$PATH:/usr/local/payara5/glassfish/bin' >> /home/payara/.bashrc
root@swebshet:~# chown payara:payara /home/payara/.bashrc
root@swebshet:~# systemctl daemon-reload
root@swebshet:~# systemctl enable payara
root@swebshet:~# systemctl start payara.service
Job for payara.service failed because the control process exited with error code.
See "systemctl status payara.service" and "journalctl -xe" for details.
root@swebshet:~# chown -R payara:payara /usr/local/payara5
root@swebshet:~# systemctl daemon-reload
root@swebshet:~# systemctl enable payara
root@swebshet:~# systemctl start payara
Job for payara.service failed because the control process exited with error code.
See "systemctl status payara.service" and "journalctl -xe" for details.
root@swebshet:~# nano /etc/systemd/system/pa
paths.target.wants/ payara.service      
root@swebshet:~# nano /etc/systemd/system/payara.service 
root@swebshet:~# firewall-cmd --permanent --add-port={4848,8080,8181}/tcp
success
root@swebshet:~# firewall-cmd --reload
success
root@swebshet:~# 






PART TWO

1 Postgresql 10.14 is alrady installed 


you may need to grab a current JDBC driver from https://jdbc.postgresql.org/download.html before launching the install script.


 sudo nano /etc/postgresql/10/main/postgresql.conf

 md5 to trust 

host    all             all             127.0.0.1/32            trust



sudo service postgresql restart




2. Installing Solr

sudo adduser solr
Adding user `solr' ...
Adding new group `solr' (1008) ...
Adding new user `solr' (1008) with group `solr' ...
Creating home directory `/home/solr' ...
Copying files from `/etc/skel' ...
Enter new UNIX password: solr
Retype new UNIX password: solr
passwd: password updated successfully
Changing the user information for solr
Enter the new value, or press ENTER for the default
	Full Name []: solr
	Room Number []: 
	Work Phone []: 
	Home Phone []: 
	Other []: 
Is the information correct? [Y/n] y


swebshet@swebshet:~$ mkdir /usr/local/solr
swebshet@swebshet:~$ sudo mkdir /usr/local/solr
swebshet@swebshet:~$ sudo chown solr:solr /usr/local/solr
swebshet@swebshet:~$ 








swebshet@swebshet:/usr/local/solr$ sudo chown -R solr:solr solr-7.7.2

solr@swebshet:/usr/local/solr/solr-7.7.2$ cp -r server/solr/configsets/_default server/solr/collection1
solr@swebshet:/tmp$ cp /tmp/dvinstall/schema*.xml /usr/local/solr/solr-7.7.2/server/solr/collection1/conf
solr@swebshet:/tmp$ cp /tmp/dvinstall/solrconfig.xml /usr/local/solr/solr-7.7.2/server/solr/collection1/conf
solr@swebshet:~$ nano /usr/local/solr/solr-7.7.2/server/etc/jetty.xml

swebshet@swebshet:~$ sudo nano /etc/security/limits.conf

solr@swebshet:~$ echo "name=collection1" > /usr/local/solr/solr-7.7.2/server/solr/collection1/core.properties






swebshet@swebshet:~$ cp /tmp/solr.service /etc/systemd/system
swebshet@swebshet:~$ sudo cp /tmp/solr.service /etc/systemd/system
[sudo] password for swebshet: 
swebshet@swebshet:~$ sudo nano /etc/systemd/system/solr.service 
swebshet@swebshet:~$ systemctl daemon-reload
swebshet@swebshet:~$ systemctl start solr.service
swebshet@swebshet:~$ systemctl enable solr.service
Created symlink /etc/systemd/system/multi-user.target.wants/solr.service → /etc/systemd/system/solr.service.




Securing Solr  we skiped!


3  Installing jq

  jq is like sed for JSON data 

  swebshet@swebshet:~$ sudo apt install jq
  
  Test it works! Try this to see it pretty print some example json

  swebshet@swebshet:~$ echo '{ "name":"John", "age":31, "city":"New York" }' | jq .
{
  "name": "John",
  "age": 31,
  "city": "New York"
}




4 ImageMagick 
 
 Dataverse uses ImageMagick to generate thumbnail previews of PDF files. 
 Installing it Optioanl so we skiped it.


5. R can be considered an optional component, meaning that if you don’t have R installed, you will still be able to run and use Dataverse - but the functionality specific to tabular data


6.Rserve
Dataverse uses Rserve to communicate to R. Rserve is installed as a library package, as described in the step above. It runs as a daemon process on the server, accepting network connections on a dedicated port


7 Counter Processor
 Counter Processor is required to enable Make Data Count metrics in Dataverse.


8 Running the Dataverse Installer



swebshet@swebshet:~/Documents/Dataverse$ unzip dvinstall.zip 

swebshet@swebshet:~$ cd /home/swebshet/Documents/Dataverse/dvinstall/
swebshet@swebshet:~/Documents/Dataverse/dvinstall$./install
root@swebshet:/home/swebshet/Documents/Dataverse# cp -R dvinstall /home/payara/
root@swebshet:/home/swebshet/Documents/Dataverse# chown -R payara:payara dvinstall
root@swebshet:/home/swebshet/Documents/Dataverse# 

root@swebshet:/home/payara# ls
dvinstall  examples.desktop
root@swebshet:/home/payara# chown -R payara:payara dvinstall/
root@swebshet:/home/payara#

su - payara

payara@swebshet:~$ cd dvinstall/
payara@swebshet:~/dvinstall$ ./install



 write permissions 
sudo chmod -R a+rwx /path/to/fol

sudo chmod  a+rwx /path/to/file”

chmod -R u+rx /usr/local/glassfish4/glassfish/lib 
chmod -R u+rx /usr/local/glassfish4/glassfish/domains/domain1
















swebshet@swebshet:~$ sudo iptables -A INPUT -p tcp --dport 4848 -j ACCEPT
















